{"version":3,"file":"index.js","sources":["../src/js/render-function.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n    captionsData: \"alt\",\n    captionDelay: 250\n});\n\nif (!document.querySelector(\".gallery\")) {\n    const galleryDiv = document.createElement(\"div\");\n    galleryDiv.classList.add(\"gallery\");\n    document.body.appendChild(galleryDiv);\n}\nexport function renderGallery(images) {\n    const gallery = document.querySelector(\".gallery\");\n\n    if (!gallery) {\n        console.error(\"ERR NOT FOUND\");\n        return;\n    }\n\n    gallery.innerHTML = \"\";\n    images.forEach(image => {\n        const container = document.createElement(\"div\");\n        container.classList.add(\"image-container\");\n\n        const link = document.createElement(\"a\");\n        link.href = image.largeImageURL;\n        link.setAttribute(\"data-lightbox\", \"gallery\");\n\n        const img = document.createElement(\"img\");\n        img.src = image.webformatURL;\n        img.alt = image.tags;\n\n        const info = document.createElement(\"p\");\n        info.innerHTML = `Likes: ${image.likes}, Views: ${image.views}, Downloads: ${image.downloads}`;\n\n        link.append(img);\n        container.append(link, info);\n        gallery.append(container);\n    });\n\n    lightbox.refresh();\n}","import axios from \"axios\";\nimport { renderGallery } from \"./render-function.js\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst API_KEY = \"42897935-d12608076f0478c23c9bb15ea\";\nconst BASE_URL = \"https://pixabay.com/api/\";\nlet currentPage = 1;\nlet currentQuery = \"\";\n\nconst loadMoreBtn = document.querySelector(\"#load-more\");\nconst form = document.querySelector(\"#search-form\");\nconst loader = document.querySelector(\"#loader\");\n\nloadMoreBtn.style.display = \"none\";\n\n\nexport async function searchImages(query, page = 1) {\n    if (query !== currentQuery) {\n        currentPage = 1;\n        currentQuery = query;\n        document.querySelector(\".gallery\").innerHTML = \"\";\n        loadMoreBtn.style.display = \"none\";\n    }\n\n    try {\n        loader.style.display = \"block\";\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                per_page: 40,\n                page: page,\n            }\n        });\n\n        loader.style.display = \"none\";\n\n        if (response.data.hits.length === 0) {\n            iziToast.error({\n                title: \"err\",\n                message: \"not found\",\n                position: \"topRight\",\n            });\n            return;\n        }\n\n        renderGallery(response.data.hits);\n        loadMoreBtn.style.display = \"block\";\n        currentPage = page;\n    } catch (error) {\n        loader.style.display = \"none\";\n        iziToast.error({\n            title: \"err\",\n            message: \"err\",\n            position: \"topRight\",\n        });\n        console.error(\"failed\", error);\n    }\n}\n\nexport function loadMoreImages() {\n    currentPage += 1;\n    searchImages(currentQuery, currentPage);\n}\n\n\nloadMoreBtn.addEventListener(\"click\", loadMoreImages);\n","import { searchImages } from './js/pixabay-api.js';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst searchButton = document.querySelector(\".searchBtn\");\nconst form = document.querySelector(\"form\");\n\nform.style.margin = \"0 auto\";\nform.style.display = \"block\";\nform.style.width = \"300px\";\n\nform.addEventListener(\"submit\", (e) => {\n    e.preventDefault();\n\n    const searchValue = form.querySelector('input').value.trim();\n\n    if (searchValue === \"\") {\n        iziToast.error({\n            title: \"Err.\",\n            message: \"nothing is found\",\n            position: \"topRight\"\n        });\n        return;\n    }\n\n    searchImages(searchValue);\n    form.querySelector(\"input\").value = \"\";\n});\n"],"names":["lightbox","SimpleLightbox","galleryDiv","renderGallery","images","gallery","image","container","link","img","info","API_KEY","BASE_URL","currentPage","currentQuery","loadMoreBtn","loader","searchImages","query","page","response","axios","iziToast","error","loadMoreImages","form","e","searchValue"],"mappings":"owBAEA,MAAMA,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAClB,CAAC,EAED,GAAI,CAAC,SAAS,cAAc,UAAU,EAAG,CACrC,MAAMC,EAAa,SAAS,cAAc,KAAK,EAC/CA,EAAW,UAAU,IAAI,SAAS,EAClC,SAAS,KAAK,YAAYA,CAAU,CACxC,CACO,SAASC,EAAcC,EAAQ,CAClC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAEjD,GAAI,CAACA,EAAS,CACV,QAAQ,MAAM,eAAe,EAC7B,MACH,CAEDA,EAAQ,UAAY,GACpBD,EAAO,QAAQE,GAAS,CACpB,MAAMC,EAAY,SAAS,cAAc,KAAK,EAC9CA,EAAU,UAAU,IAAI,iBAAiB,EAEzC,MAAMC,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,KAAOF,EAAM,cAClBE,EAAK,aAAa,gBAAiB,SAAS,EAE5C,MAAMC,EAAM,SAAS,cAAc,KAAK,EACxCA,EAAI,IAAMH,EAAM,aAChBG,EAAI,IAAMH,EAAM,KAEhB,MAAMI,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,UAAY,UAAUJ,EAAM,KAAK,YAAYA,EAAM,KAAK,gBAAgBA,EAAM,SAAS,GAE5FE,EAAK,OAAOC,CAAG,EACfF,EAAU,OAAOC,EAAME,CAAI,EAC3BL,EAAQ,OAAOE,CAAS,CAChC,CAAK,EAEDP,EAAS,QAAO,CACpB,CCrCA,MAAMW,EAAU,qCACVC,EAAW,2BACjB,IAAIC,EAAc,EACdC,EAAe,GAEnB,MAAMC,EAAc,SAAS,cAAc,YAAY,EAC1C,SAAS,cAAc,cAAc,EAClD,MAAMC,EAAS,SAAS,cAAc,SAAS,EAE/CD,EAAY,MAAM,QAAU,OAGrB,eAAeE,EAAaC,EAAOC,EAAO,EAAG,CAC5CD,IAAUJ,IACVD,EAAc,EACdC,EAAeI,EACf,SAAS,cAAc,UAAU,EAAE,UAAY,GAC/CH,EAAY,MAAM,QAAU,QAGhC,GAAI,CACAC,EAAO,MAAM,QAAU,QACvB,MAAMI,EAAW,MAAMC,EAAM,IAAIT,EAAU,CACvC,OAAQ,CACJ,IAAKD,EACL,EAAGO,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACT,CACb,CAAS,EAID,GAFAH,EAAO,MAAM,QAAU,OAEnBI,EAAS,KAAK,KAAK,SAAW,EAAG,CACjCE,EAAS,MAAM,CACX,MAAO,MACP,QAAS,YACT,SAAU,UAC1B,CAAa,EACD,MACH,CAEDnB,EAAciB,EAAS,KAAK,IAAI,EAChCL,EAAY,MAAM,QAAU,QAC5BF,EAAcM,CACjB,OAAQI,EAAO,CACZP,EAAO,MAAM,QAAU,OACvBM,EAAS,MAAM,CACX,MAAO,MACP,QAAS,MACT,SAAU,UACtB,CAAS,EACD,QAAQ,MAAM,SAAUC,CAAK,CAChC,CACL,CAEO,SAASC,GAAiB,CAC7BX,GAAe,EACfI,EAAaH,EAAcD,CAAW,CAC1C,CAGAE,EAAY,iBAAiB,QAASS,CAAc,EClE/B,SAAS,cAAc,YAAY,EACxD,MAAMC,EAAO,SAAS,cAAc,MAAM,EAE1CA,EAAK,MAAM,OAAS,SACpBA,EAAK,MAAM,QAAU,QACrBA,EAAK,MAAM,MAAQ,QAEnBA,EAAK,iBAAiB,SAAWC,GAAM,CACnCA,EAAE,eAAc,EAEhB,MAAMC,EAAcF,EAAK,cAAc,OAAO,EAAE,MAAM,OAEtD,GAAIE,IAAgB,GAAI,CACpBL,EAAS,MAAM,CACX,MAAO,OACP,QAAS,mBACT,SAAU,UACtB,CAAS,EACD,MACH,CAEDL,EAAaU,CAAW,EACxBF,EAAK,cAAc,OAAO,EAAE,MAAQ,EACxC,CAAC"}